# Traefik Configuration Generated by GAL

http:
  routers:
    canary_deployment_api_router_0:
      rule: 'PathPrefix(`/api/v1`)'
      service: canary_deployment_api_route0_service

    ab_testing_api_router_0:
      rule: 'PathPrefix(`/api/v2`)'
      service: ab_testing_api_route0_service

    beta_testing_api_router_0:
      rule: 'PathPrefix(`/api/beta`)'
      service: beta_testing_api_route0_service

    user_segment_api_router_0:
      rule: 'PathPrefix(`/api/users`)'
      service: user_segment_api_route0_service

    multi_rule_api_router_0:
      rule: 'PathPrefix(`/api/multi`)'
      service: multi_rule_api_route0_service

    gradual_rollout_api_router_0:
      rule: 'PathPrefix(`/api/rollout`)'
      service: gradual_rollout_api_route0_service

  services:
    canary_deployment_api_route0_service:
      weighted:
        services:
        - name: canary_deployment_api_stable_service
          weight: 90
        - name: canary_deployment_api_canary_service
          weight: 10
    canary_deployment_api_stable_service:
      loadBalancer:
        servers:
        - url: 'http://api-v1-stable:8080'
    canary_deployment_api_canary_service:
      loadBalancer:
        servers:
        - url: 'http://api-v1-canary:8080'

    ab_testing_api_route0_service:
      weighted:
        services:
        - name: ab_testing_api_version_a_service
          weight: 50
        - name: ab_testing_api_version_b_service
          weight: 50
    ab_testing_api_version_a_service:
      loadBalancer:
        servers:
        - url: 'http://api-v2-a:8080'
    ab_testing_api_version_b_service:
      loadBalancer:
        servers:
        - url: 'http://api-v2-b:8080'

    beta_testing_api_route0_service:
      weighted:
        services:
        - name: beta_testing_api_production_service
          weight: 100
        - name: beta_testing_api_beta_service
          weight: 0
    beta_testing_api_production_service:
      loadBalancer:
        servers:
        - url: 'http://api-prod:8080'
    beta_testing_api_beta_service:
      loadBalancer:
        servers:
        - url: 'http://api-beta:8080'

    user_segment_api_route0_service:
      weighted:
        services:
        - name: user_segment_api_stable_service
          weight: 100
        - name: user_segment_api_canary_users_service
          weight: 0
    user_segment_api_stable_service:
      loadBalancer:
        servers:
        - url: 'http://api-stable:8080'
    user_segment_api_canary_users_service:
      loadBalancer:
        servers:
        - url: 'http://api-canary:8080'

    multi_rule_api_route0_service:
      weighted:
        services:
        - name: multi_rule_api_stable_service
          weight: 70
        - name: multi_rule_api_beta_service
          weight: 20
        - name: multi_rule_api_canary_service
          weight: 10
    multi_rule_api_stable_service:
      loadBalancer:
        servers:
        - url: 'http://api-stable:8080'
    multi_rule_api_beta_service:
      loadBalancer:
        servers:
        - url: 'http://api-beta:8080'
    multi_rule_api_canary_service:
      loadBalancer:
        servers:
        - url: 'http://api-canary:8080'

    gradual_rollout_api_route0_service:
      weighted:
        services:
        - name: gradual_rollout_api_current_version_service
          weight: 95
        - name: gradual_rollout_api_new_version_service
          weight: 5
    gradual_rollout_api_current_version_service:
      loadBalancer:
        servers:
        - url: 'http://api-v1:8080'
    gradual_rollout_api_new_version_service:
      loadBalancer:
        servers:
        - url: 'http://api-v2:8080'
